<!DOCTYPE html>
<html lang="en">

<head>
    <title>GMU Computer Science Department</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <!-- Title page.  -->
    <h1>GMU Computer Science Dept. Survey</h1>
    
    <!-- User greeting. -->
    <script type="text/javascript">

        // Grab today's date.
        var now = new Date();
        var hour = now.getHours();
        var name;

        // Start of writing greeting.
        document.write("<h3> ")

        // Distinguish time of day.
        if (hour < 12)
            document.write("Good Morning ")
        else{
            hour -= 12

            if (hour<6){
                document.write("Good Afternoon ");
            }
            else
                document.write("Good Evening ");
        }

        // Find the name from cookie.
        if (document.cookie){ // if cookie exists

            // Convert escapd characters to English notation
            var myCookie = unescape(document.cookie);

            // Split the token and grab the name from cookie.
            var cookieTokens = myCookie.split("=");

            name = cookieTokens[1];

        } else{ // Cookie doesn't exists
            name = window.prompt("Please enter your name");

            document.cookie = "name=" + escape(name);

        }

        document.writeln(name + ", welcome to SWE642 survey. </h3>");

        // Wrong ID/cookie script.
        document.writeln("<a href='javascript:wrongID()'>" + "Click here to change user. Current User:" + name + "<\a>" );

        function wrongID(){
            // Erase cookie
            document.cookie = "name=null;" + " expires=Thu, 01-Jan-95 00:00:01 GMT";

            // Reload page.
            location.reload();
        }

    </script>
    <!-- END OF Greeting. -->
</head>

<body>

    <div class="container-fluid">


        <!-- Start of form. -->
        <p><strong>Required fields are marked with *</strong></p>
        <div class="degree_form">
            <form autocomplete="on">
                <!--Username-->
                <label> Username* </label>
                <input type="text" name="username" required autofocus="True" />

                <label for="grad_month">Graduation Date*
                    <!-- graduation month -->
                    <input type="text" placeholder="Select a month" list="months" required />
                    <datalist id="months">
                        <option value="January">
                        <option value="February">
                        <option value="March">
                        <option value="April">
                        <option value="May">
                        <option value="June">
                        <option value="July">
                        <option value="August">
                        <option value="September">
                        <option value="October">
                        <option value="November">
                        <option value="December">

                    </datalist>

                    <!-- graduation year -->
                    <input type="text" placeholder="####" required>
                </label>


                <!-- Address info-->
                <br />
                <label>Street Address*</label>
                <input type="text" name="streetaddress" required />
                <label>City* </label>
                <input type="text" name="city" required />
                <label>State* </label>
                <input type="text" name="state" required />

                <label>Zip Code* </label>
                <input type="text" name="zip_code" required />


                <!--Email and Telephone #-->
                <br />
                <label>Email*</label>
                <input type="email" name="email" placeholder="name@domain.com" required />

                <label> Telephone #*</label>
                <input type="tel" placeholder="(###) ###-####" name="telephone_num" pattern="\(\d{3}\) +\d{3}-\d{4}"
                    required />

                <!--URL and Survey Date-->
                <br />
                <label>URL</label>
                <input type="url" placeholder="http://www.domain.com">

                <label>Date of Survey*</label>
                <input type="date" required>

                <!--Likes-->
                <br />
                <label>What do you like about the campus?</label>
                <label> Student </label> <input type=checkbox>
                <label> Location </label> <input type=checkbox>
                <label> Campus </label> <input type=checkbox>
                <label> Atmosphere </label> <input type=checkbox>
                <label> Dorms </label> <input type=checkbox>
                <label> Sports </label> <input type=checkbox>

                <!--Interests-->
                <br />
                <label>
                    What made you interested with George Mason University?*</label>
                <input type=radio name="interests" value="friends" required />
                <label>Friends</label>

                <input type=radio name="interests" value="tv" />
                <label>TV</label>


                <input type=radio name="interests" value="internet" />
                <label>Internet</label>

                <input type=radio name="interests" value="other" />
                <label>Others</label>

                <!--Recommendation-->
                <br />
                <label> How likely are you going to recommend the school?*</label>

                <select name="rating" required>

                    <option>Very Likely</option>
                    <option>Likely</option>
                    <option>Unlikely</option>
                </select>

                <!--Raffle-->
                <br />
                <label>Raffle (Ten Numbers between [1,100])</label>
                <input type="text" name="raffle" id="raffle_num" placeholder="#,#,#,#,#,#,#,#,#,#" onchange="raffle_handler()"/>

                <!--Comments-->
                <br />
                <label>Comments</label> <br />
                <textarea rows="4" cols="36" placeholder="Enter Comments here."></textarea>

                <!--Submit button.-->
                <br />
                <input type="submit" value="Submit" />

                <!--ResetButton-->
                <input type="reset" />

                <!-- Cancel Button -->
                <button onclick="window.location.href='./cs_dept.html'">
                    Cancel
                </button>
            </form>
        </div>

    </div>

    <!-- Start of JS -->
    <script type="text/javascript">

        function raffle_handler() {
            var html_obj = document.getElementById("raffle_num");
            
            var num_array = process_raffle_input(html_obj);
            
            // Error encountered.
            if (num_array == False){
                return;
            }


        }

        /**
         * Process raffle object and return the int array (int []).
         * Returns:
         *    - False if error present.
         *    - int[] - If operation is sucessful.
         */
        function process_raffle_input(html_obj){
            

            input_string = html_obj.value;
            var num_tokens = input_string.split(",");
            
            // Validate token size.
            if(num_tokens.length < 10){
                alert("Invalid raffle input.")
                return False;
            }
            
            var output_array = [] 
            // Process string to array of ints.
            for (var i = 0; i<num_tokens.length; i++){
                output_array[i] = parseInt(num_tokens[i]);

                // Exception handling - Validate text input.
                if(output_array[i] == NaN){
                    alert("One of the raffle input is not a number.");

                    return False;
                }

                if(output_array[i] < 1 || output_array[i] > 100){
                    var error_messaage = "Output " + output_array[i] + " is not within the range [0,100]";
                    alert(error_messaage);
                    // html_object.value = "";
                    return False;
                }

            }

            return output_array;

        }

        


    </script>

</body>

</html>